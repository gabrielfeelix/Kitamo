import{d as S,c as p,h as L,p as B,g as l,f as x,a as A,b as g,D,w as f,e as s,x as E,I as P,i as r,t as o,o as a,F as c,r as _,n as b,m as h,G as N,H as M,C as q}from"./app-gwvRBHRb.js";import{u as H,_ as V}from"./useIsMobile-CpoefEyf.js";import{_ as O}from"./DesktopShell.vue_vue_type_script_setup_true_lang-B6p_nF9i.js";import{_ as $}from"./AdminLayout.vue_vue_type_script_setup_true_lang-inbDMMcH.js";const j={class:"rounded-2xl bg-slate-50 p-5 ring-1 ring-slate-200/60"},F={class:"mt-3 flex items-center gap-3 rounded-2xl bg-slate-50 px-4 py-3 ring-1 ring-slate-200/60"},I={class:"mt-4 rounded-2xl bg-slate-50 p-5 ring-1 ring-slate-200/60"},R={class:"flex items-center justify-between"},U={class:"text-xs font-semibold text-slate-400"},z={class:"mt-4 space-y-3"},G={class:"flex flex-wrap items-center gap-2"},J={class:"text-xs font-semibold text-slate-400"},K={key:0,class:"text-xs font-semibold text-slate-400"},Q={class:"mt-2 text-sm font-semibold text-slate-900"},W={key:0,class:"mt-1 text-xs font-semibold text-slate-400"},X={key:1,class:"mt-3 text-xs font-semibold text-slate-500"},Y={key:2,class:"mt-3"},Z={class:"mt-2 overflow-x-auto rounded-xl bg-white p-3 text-[11px] text-slate-700 ring-1 ring-slate-200/60"},ee={key:0,class:"mt-6 flex flex-wrap items-center justify-center gap-2"},te=["disabled","innerHTML","onClick"],ie=S({__name:"Logs",props:{q:{},logs:{}},setup(v){const i=v,m=H(),y=p(()=>m.value?V:O),T=p(()=>m.value?{showNav:!1}:{title:"Administração",showSearch:!1,showNewAction:!1}),d=L(i.q??"");B(()=>i.q,n=>d.value=n??"");let u=null;const k=()=>{u&&window.clearTimeout(u),u=window.setTimeout(()=>{h.get(route("admin.logs.index"),{q:d.value||void 0},{preserveState:!0,preserveScroll:!0,replace:!0})},250)},C=n=>{if(!n)return"";const t=new Date(n);return Number.isFinite(t.getTime())?t.toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):String(n)},w=n=>{const t=n.toUpperCase();return t==="DELETE"?"bg-red-50 text-red-700":t==="PATCH"||t==="PUT"?"bg-amber-50 text-amber-700":t==="POST"?"bg-emerald-50 text-emerald-700":"bg-slate-100 text-slate-700"};return(n,t)=>(a(),l(c,null,[x(g(D),{title:"Administração · Logs"}),(a(),A(q(y.value),N(M(T.value)),{default:f(()=>[x($,{title:"Logs de Ações",description:"Registro de ações (POST/PATCH/DELETE) no sistema."},{default:f(()=>[s("div",j,[t[2]||(t[2]=s("label",{class:"text-xs font-semibold uppercase tracking-wide text-slate-400"},"Buscar",-1)),s("div",F,[t[1]||(t[1]=s("svg",{class:"h-5 w-5 text-slate-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[s("circle",{cx:"11",cy:"11",r:"7"}),s("path",{d:"M21 21l-4.3-4.3"})],-1)),E(s("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>d.value=e),type:"text",class:"w-full appearance-none border-0 bg-transparent p-0 text-sm font-semibold text-slate-700 placeholder:text-slate-400 outline-none focus:outline-none focus-visible:outline-none",placeholder:"Ex: /api/contas, admin.users.update, email",onInput:k},null,544),[[P,d.value]])])]),s("div",I,[s("div",R,[t[3]||(t[3]=s("div",{class:"text-sm font-semibold text-slate-900"},"Logs",-1)),s("div",U,o(i.logs.data.length)+" itens",1)]),s("div",z,[(a(!0),l(c,null,_(i.logs.data,e=>(a(),l("div",{key:e.id,class:"rounded-2xl bg-slate-50 p-4 ring-1 ring-slate-200/60"},[s("div",G,[s("span",{class:b(["rounded-full px-3 py-1 text-xs font-semibold",w(e.method)])},o(e.method),3),s("span",J,o(C(e.created_at)),1),e.status_code?(a(),l("span",K,"· "+o(e.status_code),1)):r("",!0)]),s("div",Q,o(e.path),1),e.route_name?(a(),l("div",W,o(e.route_name),1)):r("",!0),e.actor?(a(),l("div",X,o(e.actor.name)+" · "+o(e.actor.email),1)):r("",!0),e.payload&&Object.keys(e.payload).length?(a(),l("details",Y,[t[4]||(t[4]=s("summary",{class:"cursor-pointer text-xs font-semibold text-slate-500"},"Ver payload",-1)),s("pre",Z,o(JSON.stringify(e.payload,null,2)),1)])):r("",!0)]))),128))]),i.logs.links?.length?(a(),l("div",ee,[(a(!0),l(c,null,_(i.logs.links,e=>(a(),l("button",{key:e.label,type:"button",class:b(["rounded-full px-4 py-2 text-xs font-semibold ring-1",e.active?"bg-[#14B8A6] text-white ring-[#14B8A6]":"bg-white text-slate-600 ring-slate-200 hover:bg-slate-50"]),disabled:!e.url,innerHTML:e.label,onClick:se=>e.url&&g(h).visit(e.url)},null,10,te))),128))])):r("",!0)])]),_:1})]),_:1},16))],64))}});export{ie as default};

import{d as I,c as y,h as w,N as E,g as m,f,a as R,b as i,D as T,w as v,e as t,o as d,F as k,r as F,i as x,t as r,x as n,I as p,P as L,k as c,y as u,G as z,H as K,C as O,m as _}from"./app-C-UtfaCz.js";import{u as G,_ as H}from"./useIsMobile-LrQea_ml.js";import{_ as W}from"./DesktopShell.vue_vue_type_script_setup_true_lang-DniXuI_G.js";import{_ as J}from"./AdminLayout.vue_vue_type_script_setup_true_lang-D241VTQc.js";import{_ as Q}from"./Modal.vue_vue_type_script_setup_true_lang-BqPyGdI6.js";import{n as h,p as B,f as X,m as Y}from"./inputGuards-BV9ov3X1.js";const Z={class:"mt-6 grid gap-4 md:grid-cols-2 xl:grid-cols-3"},ee={key:0,class:"absolute right-4 top-4 rounded-full bg-gradient-to-r from-emerald-500 to-teal-600 px-3 py-1 text-xs font-bold text-white"},te={class:"text-lg font-bold text-slate-900"},se={key:1,class:"mt-1 text-sm font-medium text-slate-500"},le={class:"mt-5 flex items-end gap-2"},oe={class:"text-3xl font-bold text-[#14B8A6]"},ie={class:"pb-1 text-sm font-semibold text-slate-400"},ne={class:"mt-5 space-y-2 text-sm font-semibold text-slate-600"},re={class:"mt-6 flex flex-wrap items-center gap-2"},ae=["onClick"],de=["onClick"],ue={key:0,class:"rounded-full bg-slate-100 px-3 py-1 text-xs font-semibold text-slate-600"},me={class:"p-6"},ce={class:"flex items-start justify-between gap-4"},pe={class:"text-lg font-semibold text-slate-900"},be={class:"mt-6 grid gap-4 md:grid-cols-2"},xe={class:"block md:col-span-2"},_e={class:"block"},fe=["value"],ve={class:"block"},ge={class:"block md:col-span-2"},ye={class:"md:col-span-2"},we={class:"grid gap-3 md:grid-cols-2"},ke={class:"rounded-2xl bg-slate-50 p-4 ring-1 ring-slate-200/60"},he={class:"flex items-center justify-between"},Be={class:"inline-flex items-center gap-2 text-xs font-semibold text-slate-600"},Ce=["disabled"],je={class:"rounded-2xl bg-slate-50 p-4 ring-1 ring-slate-200/60"},Ne={class:"flex items-center justify-between"},Ve={class:"inline-flex items-center gap-2 text-xs font-semibold text-slate-600"},Se=["disabled"],Ae={class:"rounded-2xl bg-slate-50 p-4 ring-1 ring-slate-200/60"},Pe={class:"rounded-2xl bg-slate-50 p-4 ring-1 ring-slate-200/60"},De={class:"mt-3 space-y-2 text-sm font-semibold text-slate-700"},Ue={class:"flex items-center justify-between"},Me={class:"flex items-center justify-between"},qe={class:"flex items-center justify-between"},$e={class:"md:col-span-2"},Ie={class:"grid gap-3 md:grid-cols-2"},Ee={class:"block rounded-2xl bg-slate-50 p-4 ring-1 ring-slate-200/60"},Re={class:"block rounded-2xl bg-slate-50 p-4 ring-1 ring-slate-200/60"},Te={class:"flex items-center justify-between"},Fe={class:"md:col-span-2"},Le={class:"flex flex-wrap items-center gap-4 rounded-2xl bg-slate-50 p-4 ring-1 ring-slate-200/60"},ze={class:"flex items-center gap-2 text-sm font-semibold text-slate-700"},Ke={class:"flex items-center gap-2 text-sm font-semibold text-slate-700"},Oe={key:0,class:"mt-4 rounded-2xl bg-red-50 p-4 text-sm font-semibold text-red-700"},Ge={class:"mt-6 flex items-center justify-end gap-2"},He=["disabled"],et=I({__name:"Plans",props:{plans:{}},setup(C){const j=C,g=G(),N=y(()=>g.value?H:W),V=y(()=>g.value?{showNav:!1}:{title:"AdministraÃ§Ã£o",showSearch:!1,showNewAction:!1}),S=o=>`R$ ${h((Number(o??0)||0)/100)}`,A=o=>o==="annual"?"/ano":o==="lifetime"?"vitalÃ­cio":"/mÃªs",a=w(!1),b=w(null),l=E({name:"",description:"",price_display:"",interval:"monthly",accounts_unlimited:!1,accounts_limit:"1",cards_unlimited:!1,cards_limit:"1",projection_days:"30",backup_enabled:!1,recurring_enabled:!1,priority_support:!1,trial_days:"0",requires_card:!1,is_popular:!1,is_active:!0,sort_order:"0"}),P=o=>{if(!String(o??"").trim()){l.price_display="";return}l.price_display=X(o)},D=()=>{b.value=null,l.reset(),l.clearErrors(),l.is_active=!0,a.value=!0},U=o=>{b.value=o.id,l.reset(),l.clearErrors(),l.name=o.name,l.description=o.description??"",l.price_display=h((o.price_cents??0)/100),l.interval=o.interval==="annual"?"annual":o.interval==="lifetime"?"lifetime":"monthly",l.accounts_unlimited=o.accounts_limit==null,l.accounts_limit=String(o.accounts_limit??3),l.cards_unlimited=o.cards_limit==null,l.cards_limit=String(o.cards_limit??5),l.projection_days=String(o.projection_days??30),l.backup_enabled=!!o.backup_enabled,l.recurring_enabled=!!o.recurring_enabled,l.priority_support=!!o.priority_support,l.trial_days=String(o.trial_days??0),l.requires_card=!!o.requires_card,l.is_popular=!!o.is_popular,l.is_active=!!o.is_active,l.sort_order="0",a.value=!0},M=()=>{const o=Math.max(0,Y(l.price_display||"0,00")),e=Math.round(o*100);if(l.transform(s=>({name:s.name,description:s.description||null,price_cents:e,currency:"BRL",interval:s.interval,accounts_limit:s.accounts_unlimited?null:Number(s.accounts_limit||0)||null,cards_limit:s.cards_unlimited?null:Number(s.cards_limit||0)||null,projection_days:Number(s.projection_days||0)||0,backup_enabled:!!s.backup_enabled,recurring_enabled:!!s.recurring_enabled,priority_support:!!s.priority_support,trial_days:Number(s.trial_days||0)||0,requires_card:!!s.requires_card,is_popular:!!s.is_popular,is_active:!!s.is_active,sort_order:Number(s.sort_order||0)||0})),b.value){l.patch(route("admin.plans.update",b.value),{preserveScroll:!0,onSuccess:()=>{a.value=!1,_.reload({only:["plans"]})}});return}l.post(route("admin.plans.store"),{preserveScroll:!0,onSuccess:()=>{a.value=!1,_.reload({only:["plans"]})}})},q=o=>{_.patch(route("admin.plans.update",o.id),{name:o.name,description:o.description,price_cents:o.price_cents,currency:o.currency,interval:o.interval,accounts_limit:o.accounts_limit,cards_limit:o.cards_limit,projection_days:o.projection_days,backup_enabled:o.backup_enabled,recurring_enabled:o.recurring_enabled,priority_support:o.priority_support,trial_days:o.trial_days,requires_card:o.requires_card,is_popular:o.is_popular,is_active:!o.is_active,sort_order:0},{preserveScroll:!0,onSuccess:()=>_.reload({only:["plans"]})})};return(o,e)=>(d(),m(k,null,[f(i(T),{title:"AdministraÃ§Ã£o Â· Planos"}),(d(),R(O(N.value),z(K(V.value)),{default:v(()=>[f(J,{title:"Planos e MonetizaÃ§Ã£o",description:"Configure recursos, preÃ§os e limites de cada plano."},{default:v(()=>[t("div",{class:"flex flex-wrap items-center justify-between gap-3"},[t("button",{type:"button",class:"inline-flex items-center justify-center rounded-2xl bg-[#14B8A6] px-4 py-3 text-sm font-semibold text-white shadow-lg shadow-emerald-500/20",onClick:D}," + Criar novo plano "),e[20]||(e[20]=t("div",{class:"text-xs font-semibold text-slate-400"},"Dica: sÃ³ 1 plano pode ficar marcado como â€œPopularâ€.",-1))]),t("div",Z,[(d(!0),m(k,null,F(j.plans,s=>(d(),m("div",{key:s.id,class:"relative rounded-2xl border border-slate-200 bg-white p-6 shadow-sm transition hover:shadow-md"},[s.is_popular?(d(),m("div",ee," ðŸ·ï¸ Popular ")):x("",!0),t("div",te,r(s.name),1),s.description?(d(),m("div",se,r(s.description),1)):x("",!0),t("div",le,[t("div",oe,r(S(s.price_cents)),1),t("div",ie,r(A(s.interval)),1)]),t("div",ne,[t("div",null,"âœ… Contas: "+r(s.accounts_limit==null?"Ilimitado":s.accounts_limit),1),t("div",null,"âœ… CartÃµes: "+r(s.cards_limit==null?"Ilimitado":s.cards_limit),1),t("div",null,"âœ… ProjeÃ§Ã£o: "+r(s.projection_days)+" dias",1),t("div",null,r(s.backup_enabled?"âœ…":"âŒ")+" Backup automÃ¡tico",1),t("div",null,r(s.recurring_enabled?"âœ…":"âŒ")+" Despesas recorrentes",1),t("div",null,r(s.priority_support?"âœ…":"âš ï¸")+" Suporte prioritÃ¡rio",1)]),t("div",re,[t("button",{type:"button",class:"rounded-xl border border-emerald-200 bg-white px-3 py-2 text-xs font-semibold text-emerald-700 hover:bg-emerald-50",onClick:$=>U(s)}," Editar ",8,ae),t("button",{type:"button",class:"rounded-xl border border-red-200 bg-white px-3 py-2 text-xs font-semibold text-red-700 hover:bg-red-50",onClick:$=>q(s)},r(s.is_active?"Desativar":"Ativar"),9,de),s.is_active?x("",!0):(d(),m("span",ue,"Desativado"))])]))),128))]),f(Q,{show:a.value,maxWidth:"2xl",onClose:e[19]||(e[19]=s=>a.value=!1)},{default:v(()=>[t("div",me,[t("div",ce,[t("div",null,[t("div",pe,r(b.value?"Editar plano":"Novo plano"),1),e[21]||(e[21]=t("div",{class:"mt-1 text-sm text-slate-500"},"Defina limites, recursos e preÃ§o.",-1))]),t("button",{type:"button",class:"flex h-10 w-10 items-center justify-center rounded-2xl bg-slate-50 text-slate-600 ring-1 ring-slate-200/60","aria-label":"Fechar",onClick:e[0]||(e[0]=s=>a.value=!1)},[...e[22]||(e[22]=[t("svg",{class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M6 6l12 12"}),t("path",{d:"M18 6 6 18"})],-1)])])]),t("div",be,[t("label",xe,[e[23]||(e[23]=t("div",{class:"text-xs font-semibold text-slate-500"},"Nome do plano *",-1)),n(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>i(l).name=s),type:"text",class:"mt-2 h-11 w-full rounded-xl border border-slate-200 bg-white px-4 text-sm font-semibold text-slate-800",placeholder:"Ex.: Premium"},null,512),[[p,i(l).name]])]),t("label",_e,[e[24]||(e[24]=t("div",{class:"text-xs font-semibold text-slate-500"},"PreÃ§o (R$) *",-1)),t("input",{value:i(l).price_display,type:"text",inputmode:"numeric",placeholder:"0,00",class:"mt-2 h-11 w-full rounded-xl border border-slate-200 bg-white px-4 text-right text-sm font-semibold text-slate-800",onKeydown:e[2]||(e[2]=(...s)=>i(B)&&i(B)(...s)),onInput:e[3]||(e[3]=s=>P(s.target.value))},null,40,fe)]),t("label",ve,[e[26]||(e[26]=t("div",{class:"text-xs font-semibold text-slate-500"},"Periodicidade *",-1)),n(t("select",{"onUpdate:modelValue":e[4]||(e[4]=s=>i(l).interval=s),class:"mt-2 h-11 w-full appearance-none rounded-xl border border-slate-200 bg-white px-4 pr-10 text-sm font-semibold text-slate-800"},[...e[25]||(e[25]=[t("option",{value:"monthly"},"Mensal",-1),t("option",{value:"annual"},"Anual",-1),t("option",{value:"lifetime"},"VitalÃ­cio",-1)])],512),[[L,i(l).interval]])]),t("label",ge,[e[27]||(e[27]=t("div",{class:"text-xs font-semibold text-slate-500"},"DescriÃ§Ã£o (opcional)",-1)),n(t("input",{"onUpdate:modelValue":e[5]||(e[5]=s=>i(l).description=s),type:"text",class:"mt-2 h-11 w-full rounded-xl border border-slate-200 bg-white px-4 text-sm font-semibold text-slate-800",maxlength:"200"},null,512),[[p,i(l).description]])]),t("div",ye,[e[37]||(e[37]=t("div",{class:"mb-2 text-xs font-semibold uppercase tracking-wide text-slate-400"},"Recursos e limites",-1)),t("div",we,[t("div",ke,[t("div",he,[e[29]||(e[29]=t("div",{class:"text-sm font-semibold text-slate-900"},"NÃºmero de contas",-1)),t("label",Be,[n(t("input",{"onUpdate:modelValue":e[6]||(e[6]=s=>i(l).accounts_unlimited=s),type:"checkbox",class:"h-4 w-4 text-[#14B8A6]"},null,512),[[u,i(l).accounts_unlimited]]),e[28]||(e[28]=c(" Ilimitado ",-1))])]),n(t("input",{"onUpdate:modelValue":e[7]||(e[7]=s=>i(l).accounts_limit=s),type:"number",min:"1",class:"mt-3 h-10 w-full rounded-xl border border-slate-200 bg-white px-4 text-sm font-semibold text-slate-800 disabled:bg-slate-100",disabled:i(l).accounts_unlimited},null,8,Ce),[[p,i(l).accounts_limit]])]),t("div",je,[t("div",Ne,[e[31]||(e[31]=t("div",{class:"text-sm font-semibold text-slate-900"},"NÃºmero de cartÃµes",-1)),t("label",Ve,[n(t("input",{"onUpdate:modelValue":e[8]||(e[8]=s=>i(l).cards_unlimited=s),type:"checkbox",class:"h-4 w-4 text-[#14B8A6]"},null,512),[[u,i(l).cards_unlimited]]),e[30]||(e[30]=c(" Ilimitado ",-1))])]),n(t("input",{"onUpdate:modelValue":e[9]||(e[9]=s=>i(l).cards_limit=s),type:"number",min:"1",class:"mt-3 h-10 w-full rounded-xl border border-slate-200 bg-white px-4 text-sm font-semibold text-slate-800 disabled:bg-slate-100",disabled:i(l).cards_unlimited},null,8,Se),[[p,i(l).cards_limit]])]),t("div",Ae,[e[32]||(e[32]=t("div",{class:"text-sm font-semibold text-slate-900"},"ProjeÃ§Ã£o futura (dias)",-1)),n(t("input",{"onUpdate:modelValue":e[10]||(e[10]=s=>i(l).projection_days=s),type:"number",min:"0",class:"mt-3 h-10 w-full rounded-xl border border-slate-200 bg-white px-4 text-sm font-semibold text-slate-800"},null,512),[[p,i(l).projection_days]])]),t("div",Pe,[e[36]||(e[36]=t("div",{class:"text-sm font-semibold text-slate-900"},"Atalhos",-1)),t("div",De,[t("label",Ue,[e[33]||(e[33]=c(" Backup automÃ¡tico ",-1)),n(t("input",{"onUpdate:modelValue":e[11]||(e[11]=s=>i(l).backup_enabled=s),type:"checkbox",class:"h-4 w-4 text-[#14B8A6]"},null,512),[[u,i(l).backup_enabled]])]),t("label",Me,[e[34]||(e[34]=c(" Despesas recorrentes ",-1)),n(t("input",{"onUpdate:modelValue":e[12]||(e[12]=s=>i(l).recurring_enabled=s),type:"checkbox",class:"h-4 w-4 text-[#14B8A6]"},null,512),[[u,i(l).recurring_enabled]])]),t("label",qe,[e[35]||(e[35]=c(" Suporte prioritÃ¡rio ",-1)),n(t("input",{"onUpdate:modelValue":e[13]||(e[13]=s=>i(l).priority_support=s),type:"checkbox",class:"h-4 w-4 text-[#14B8A6]"},null,512),[[u,i(l).priority_support]])])])])])]),t("div",$e,[e[41]||(e[41]=t("div",{class:"mb-2 text-xs font-semibold uppercase tracking-wide text-slate-400"},"Trial",-1)),t("div",Ie,[t("label",Ee,[e[38]||(e[38]=t("div",{class:"text-sm font-semibold text-slate-900"},"Dias de trial",-1)),n(t("input",{"onUpdate:modelValue":e[14]||(e[14]=s=>i(l).trial_days=s),type:"number",min:"0",class:"mt-3 h-10 w-full rounded-xl border border-slate-200 bg-white px-4 text-sm font-semibold text-slate-800"},null,512),[[p,i(l).trial_days]])]),t("label",Re,[t("div",Te,[e[39]||(e[39]=t("div",{class:"text-sm font-semibold text-slate-900"},"Requer cartÃ£o?",-1)),n(t("input",{"onUpdate:modelValue":e[15]||(e[15]=s=>i(l).requires_card=s),type:"checkbox",class:"h-4 w-4 text-[#14B8A6]"},null,512),[[u,i(l).requires_card]])]),e[40]||(e[40]=t("div",{class:"mt-3 text-xs font-semibold text-slate-500"},"Opcional (para futuras integraÃ§Ãµes).",-1))])])]),t("div",Fe,[e[44]||(e[44]=t("div",{class:"mb-2 text-xs font-semibold uppercase tracking-wide text-slate-400"},"Destaque",-1)),t("div",Le,[t("label",ze,[n(t("input",{"onUpdate:modelValue":e[16]||(e[16]=s=>i(l).is_popular=s),type:"checkbox",class:"h-4 w-4 text-[#14B8A6]"},null,512),[[u,i(l).is_popular]]),e[42]||(e[42]=c(" Marcar como â€œPopularâ€ ",-1))]),t("label",Ke,[n(t("input",{"onUpdate:modelValue":e[17]||(e[17]=s=>i(l).is_active=s),type:"checkbox",class:"h-4 w-4 text-[#14B8A6]"},null,512),[[u,i(l).is_active]]),e[43]||(e[43]=c(" Plano ativo ",-1))])])])]),i(l).hasErrors?(d(),m("div",Oe," NÃ£o foi possÃ­vel salvar. Verifique os campos. ")):x("",!0),t("div",Ge,[t("button",{type:"button",class:"rounded-xl px-4 py-2 text-sm font-semibold text-slate-600",onClick:e[18]||(e[18]=s=>a.value=!1)},"Cancelar"),t("button",{type:"button",class:"rounded-xl bg-[#14B8A6] px-4 py-2 text-sm font-semibold text-white shadow-lg shadow-emerald-500/20 disabled:opacity-60",disabled:i(l).processing,onClick:M},r(i(l).processing?"Salvandoâ€¦":"Salvar plano"),9,He)])])]),_:1},8,["show"])]),_:1})]),_:1},16))],64))}});export{et as default};

import{d as M,c as _,h as x,N as w,g as r,f as b,a as V,b as a,D as F,w as f,e,t as d,o as i,F as k,r as I,n as P,i as C,G as z,H as T,C as U,x as v,I as S,P as q,m as g}from"./app-gwvRBHRb.js";import{u as O,_ as R}from"./useIsMobile-CpoefEyf.js";import{_ as G}from"./DesktopShell.vue_vue_type_script_setup_true_lang-B6p_nF9i.js";import{_ as H}from"./Modal.vue_vue_type_script_setup_true_lang-B8sHPPmH.js";import{_ as Q}from"./AdminLayout.vue_vue_type_script_setup_true_lang-inbDMMcH.js";const W={class:"rounded-2xl bg-slate-50 p-6 ring-1 ring-slate-200/60"},J={class:"flex flex-wrap items-center justify-between gap-3"},K={class:"mt-1 text-xs font-semibold text-slate-400"},X={key:0,class:"mt-6 rounded-2xl border border-dashed border-slate-200 bg-slate-50 px-4 py-10 text-center"},Y={key:1,class:"mt-6 overflow-hidden rounded-2xl ring-1 ring-slate-200/60"},Z={class:"min-w-full text-left text-sm"},ee={class:"divide-y divide-slate-100"},te={class:"px-4 py-3 font-semibold text-slate-900"},se={class:"px-4 py-3 text-slate-700"},le={class:"px-4 py-3"},oe={class:"hidden px-4 py-3 text-slate-500 md:table-cell"},ae={class:"hidden px-4 py-3 text-slate-500 md:table-cell"},ne={class:"px-4 py-3 text-right"},de={class:"flex justify-end gap-2"},ie=["onClick"],re=["onClick"],ue={key:0,class:"mt-2 rounded-xl bg-red-50 p-3 text-left ring-1 ring-red-100"},ce={class:"mt-2 flex justify-end gap-2"},pe=["disabled","onClick"],me={class:"p-6"},xe={class:"flex items-start justify-between gap-4"},be={class:"text-lg font-semibold text-slate-900"},fe={class:"mt-5 grid gap-4 md:grid-cols-2"},ve={class:"block"},ge={class:"block"},he={class:"block md:col-span-2"},ye={key:0,class:"mt-4 rounded-2xl bg-red-50 p-4 text-sm font-semibold text-red-700"},_e={class:"mt-6 flex items-center justify-end gap-2"},we=["disabled"],De=M({__name:"Leads",props:{leads:{}},setup(E){const p=E,h=O(),N=_(()=>h.value?R:G),D=_(()=>h.value?{showNav:!1}:{title:"Administração",showSearch:!1,showNewAction:!1}),$=o=>{if(!o)return"";const t=new Date(o);return Number.isFinite(t.getTime())?t.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"}):String(o)},n=x(!1),u=x(null),l=w({name:"",email:"",status:"subscribed"}),B=()=>{u.value=null,l.reset(),l.clearErrors(),n.value=!0},j=o=>{u.value=o.id,l.reset(),l.clearErrors(),l.name=o.name??"",l.email=o.email,l.status=o.status,n.value=!0},A=()=>{if(u.value){l.patch(route("admin.leads.update",u.value),{preserveScroll:!0,onSuccess:()=>{n.value=!1,g.reload({only:["leads"]})}});return}l.post(route("admin.leads.store"),{preserveScroll:!0,onSuccess:()=>{n.value=!1,g.reload({only:["leads"]})}})},c=x(null),y=w({}),L=o=>{y.delete(route("admin.leads.destroy",o),{preserveScroll:!0,onSuccess:()=>{c.value=null,g.reload({only:["leads"]})}})};return(o,t)=>(i(),r(k,null,[b(a(F),{title:"Administração · Leads"}),(i(),V(U(N.value),z(T(D.value)),{default:f(()=>[b(Q,{title:"Leads",description:"Leads capturados pela newsletter (landing page)."},{default:f(()=>[e("div",W,[e("div",J,[e("div",null,[t[7]||(t[7]=e("div",{class:"text-sm font-semibold text-slate-900"},"Leads",-1)),e("div",K,d(p.leads.length)+" no total",1)]),e("button",{type:"button",class:"inline-flex items-center justify-center rounded-2xl bg-[#14B8A6] px-4 py-3 text-sm font-semibold text-white shadow-lg shadow-emerald-500/20",onClick:B}," + Adicionar lead ")]),p.leads.length===0?(i(),r("div",X,[...t[8]||(t[8]=[e("div",{class:"text-sm font-semibold text-slate-900"},"Nenhum lead ainda",-1),e("div",{class:"mt-2 text-xs font-semibold text-slate-500"},"Quando alguém se inscrever na newsletter, aparece aqui.",-1)])])):(i(),r("div",Y,[e("table",Z,[t[10]||(t[10]=e("thead",{class:"bg-slate-50 text-xs font-bold uppercase tracking-wide text-slate-400"},[e("tr",null,[e("th",{class:"px-4 py-3"},"Nome"),e("th",{class:"px-4 py-3"},"E-mail"),e("th",{class:"px-4 py-3"},"Status"),e("th",{class:"hidden px-4 py-3 md:table-cell"},"Origem"),e("th",{class:"hidden px-4 py-3 md:table-cell"},"Data"),e("th",{class:"px-4 py-3 text-right"},"Ações")])],-1)),e("tbody",ee,[(i(!0),r(k,null,I(p.leads,s=>(i(),r("tr",{key:s.id,class:"bg-white"},[e("td",te,d(s.name||"—"),1),e("td",se,d(s.email),1),e("td",le,[e("span",{class:P(["inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold",s.status==="subscribed"?"bg-emerald-50 text-emerald-700":"bg-slate-100 text-slate-600"])},d(s.status==="subscribed"?"Inscrito":"Descadastrado"),3)]),e("td",oe,d(s.source||"—"),1),e("td",ae,d($(s.subscribed_at||s.created_at)),1),e("td",ne,[e("div",de,[e("button",{type:"button",class:"rounded-xl bg-slate-50 px-3 py-2 text-xs font-semibold text-slate-700 ring-1 ring-slate-200/60 hover:bg-slate-100",onClick:m=>j(s)}," Editar ",8,ie),e("button",{type:"button",class:"rounded-xl bg-red-50 px-3 py-2 text-xs font-semibold text-red-700 ring-1 ring-red-100 hover:bg-red-100",onClick:m=>c.value=c.value===s.id?null:s.id}," Excluir ",8,re)]),c.value===s.id?(i(),r("div",ue,[t[9]||(t[9]=e("div",{class:"text-xs font-semibold text-red-700"},"Tem certeza?",-1)),e("div",ce,[e("button",{type:"button",class:"px-3 py-2 text-xs font-semibold text-slate-600",onClick:t[0]||(t[0]=m=>c.value=null)},"Cancelar"),e("button",{type:"button",class:"rounded-xl bg-red-600 px-3 py-2 text-xs font-semibold text-white disabled:opacity-60",disabled:a(y).processing,onClick:m=>L(s.id)}," Excluir agora ",8,pe)])])):C("",!0)])]))),128))])])]))])]),_:1})]),_:1},16)),b(H,{show:n.value,maxWidth:"lg",onClose:t[6]||(t[6]=s=>n.value=!1)},{default:f(()=>[e("div",me,[e("div",xe,[e("div",null,[e("div",be,d(u.value?"Editar lead":"Novo lead"),1),t[11]||(t[11]=e("div",{class:"mt-1 text-sm text-slate-500"},"Cadastro usado para newsletters (inscritos da landing page).",-1))]),e("button",{type:"button",class:"flex h-10 w-10 items-center justify-center rounded-2xl bg-slate-50 text-slate-600 ring-1 ring-slate-200/60","aria-label":"Fechar",onClick:t[1]||(t[1]=s=>n.value=!1)},[...t[12]||(t[12]=[e("svg",{class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M6 6l12 12"}),e("path",{d:"M18 6l-12 12"})],-1)])])]),e("div",fe,[e("label",ve,[t[13]||(t[13]=e("div",{class:"text-xs font-semibold text-slate-500"},"Nome (opcional)",-1)),v(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>a(l).name=s),type:"text",class:"mt-2 h-11 w-full appearance-none rounded-xl border border-slate-200 bg-white px-4 text-sm font-semibold text-slate-800 placeholder:text-slate-400",placeholder:"Ex.: Maria"},null,512),[[S,a(l).name]])]),e("label",ge,[t[14]||(t[14]=e("div",{class:"text-xs font-semibold text-slate-500"},"E-mail",-1)),v(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>a(l).email=s),type:"email",class:"mt-2 h-11 w-full appearance-none rounded-xl border border-slate-200 bg-white px-4 text-sm font-semibold text-slate-800 placeholder:text-slate-400",placeholder:"nome@exemplo.com"},null,512),[[S,a(l).email]])]),e("label",he,[t[16]||(t[16]=e("div",{class:"text-xs font-semibold text-slate-500"},"Status",-1)),v(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>a(l).status=s),class:"mt-2 h-11 w-full appearance-none rounded-xl border border-slate-200 bg-white px-4 pr-10 text-sm font-semibold text-slate-800"},[...t[15]||(t[15]=[e("option",{value:"subscribed"},"Inscrito",-1),e("option",{value:"unsubscribed"},"Descadastrado",-1)])],512),[[q,a(l).status]])])]),a(l).hasErrors?(i(),r("div",ye," Não foi possível salvar. Verifique os campos. ")):C("",!0),e("div",_e,[e("button",{type:"button",class:"rounded-xl px-4 py-2 text-sm font-semibold text-slate-600",onClick:t[5]||(t[5]=s=>n.value=!1)},"Cancelar"),e("button",{type:"button",class:"rounded-xl bg-[#14B8A6] px-4 py-2 text-sm font-semibold text-white shadow-lg shadow-emerald-500/20 disabled:opacity-60",disabled:a(l).processing,onClick:A},d(a(l).processing?"Salvando…":"Salvar"),9,we)])])]),_:1},8,["show"])],64))}});export{De as default};
